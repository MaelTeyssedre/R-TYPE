Epitech project         R-TYPE projet RFC protocol           November 2021

                                                   Epitech R-TYPE project
                  Romain GABET Jules SAVANG Mael TEYSSEDRE Alban BODENES
                                                            November 2021


              RFC protocol of the Epitech project 'R-TYPE'
                            R-TYPE-rfc-latest

Status of This Memo

   This document have been made to help you understand the protocol and
   the project functionnement.

Copyright Notice

   This is Copyright free :)

Epitech R-TYPE project     Realized in November 2021              [Page 1]

Epitech project         R-TYPE projet RFC protocol           November 2021


Table of Contents

   Introduction  . . . . . . . . . . . . . . . . . . . . . . . . . .   2
   1. R-TYPE UDP protocol  . . . . . . . . . . . . . . . . . . . . .   3
         1.1.  Requests from both sides  . . . . . . . . . . . . . .   3
         1.2.  Sequence diagram  . . . . . . . . . . . . . . . . . .   4
   2. R-TYPE TCP protocol  . . . . . . . . . . . . . . . . . . . . .   5
         2.1.  Requests from server to client  . . . . . . . . . . .   5
         2.2.  Sequence diagram  . . . . . . . . . . . . . . . . . .   6
   3. JSON Grammar . . . . . . . . . . . . . . . . . . . . . . . . .   7
   Contact us  . . . . . . . . . . . . . . . . . . . . . . . . . . .   8

Introduction

   The goal of the R-Type project is to create an online multiplayer
   copy of the classic R-Type game (1987).

   Protocol is using TCP and UDP requests. 
   TCP is a slow and reliable methode using for communication between 
   server and client, where there is few but important informations.
   UDP is a fast unreliable methode using for communication between
   client and client, for audio transmission, where loosing few requests
   is acceptable.
      
   Every TCP request length is at least 1 bytes, the size of the request code.
   It could be more with arguments. 


Epitech R-TYPE project     Realized in November 2021              [Page 2]

Epitech project         R-TYPE project RFC protocol           November 2021

1.  R-TYPE UDP protocol

   1.1.  Requests from both sides

   1<id_player><x_pos, y_pos><hp><type> : Player status -> 12 bytes

      - 1: request id -> 1 byte
      - id_player: id of the player (1-4) -> 1 byte
      - x_pos: x position player -> 4 bytes
      - y_pos: y position player -> 4 bytes
      - hp: health point of the player -> 1 byte
      - type: weapon type of the player -> 1 byte


   2<id_monster><type><x_pos, y_pos><hp> : Monster status -> 14 bytes

      - 2: request id -> 1 byte
      - id_monster: The monster id -> 2 bytes
      - type: The monster type -> 1 byte
      - x_pos: x position monster -> 4 bytes
      - y_pos: y position monster -> 4 bytes
      - hp: health point of the monster -> 1 byte


   3<id_shot><type><x_pos, y_pos><origin> : Shot status -> 13 bytes

      - 3: request id -> 1 byte
      - id_shot: The shot id -> 2 bytes
      - type: type of shot -> 1 byte
      - x_pos: x position of the shot -> 4 bytes
      - y_pos: y position of the shot -> 4 bytes
      - origin: Is the shot come from monster or player -> 1 byte
      

Epitech R-TYPE project     Realized in November 2021              [Page 3]

Epitech project         R-TYPE projet RFC protocol           November 2021

   1.2.  Sequence diagram

        * Connection - example:

            +-------------+            +--------+
            |             |   (1)      |        |
            |             |----------->|        |
            |   Client    |<-----------| SERVER |
            |             |   (2)      |        |
            |             |            |        |
            +-------------+            +--------+

Epitech R-TYPE project     Realized in November 2021              [Page 4]

Epitech project         R-TYPE project RFC protocol           November 2021

2.  R-TYPE TCP protocol

   2.1.  Requests from server to client

      1: Game beginning -> 1 byte

         - 1: request id -> 1 byte


      2: Game ending -> 1 bytes

         - 2: request id -> 1 byte


      3<size><json>: Load the game -> <size> + 5 bytes

         - 3: request id -> 1 byte
         - size: size of the JSon file passed in parameter -> 4 bytes
         - json: Json file containing the map elements -> <size> bytes


      4: Player has been Banned -> 1 bytes

         - 4: request id -> 1 byte


Epitech R-TYPE project     Realized in November 2021              [Page 5]

Epitech project         R-TYPE projet RFC protocol           November 2021

   2.2.  Sequence diagram
   
           * Connection - example:

            +-------------+            +--------+
            |             |   (1)      |        |
            |             |----------->|        |
            |   Client    |<-----------| SERVER |
            |             |   (2)      |        |
            |             |            |        |
            +-------------+            +--------+


Epitech R-TYPE project     Realized in November 2021              [Page 6]

Epitech project         R-TYPE projet RFC protocol           November 2021

3. JSON Grammar

   {"monster": {
      "id": int8,
      "pos": [int,int],
      "strength": int8,
      "hp": int8,
      "loot": bool,
      "type": int8
   },"wall": {
      "pos": [int, int],
      "type": int8
   },"player": {
      "id": int8,
      "pos": [int,int],
      "hp": int8,
      "strength": int8
   }}


Epitech R-TYPE project     Realized in November 2021              [Page 7]

Epitech project         R-TYPE projet RFC protocol           November 2021

Author's Address

   Romain GABET <romain.gabet@epitech.eu>
   Jules SAVANG <jules.savang@epitech.eu>
   Mael TEYSSEDRE <mael.teyssedre@epitech.eu>
   Alban BODENES <alban.bodenes@epitech.eu>


Epitech R-TYPE project     Realized in November 2021              [Page 8]
