project(RTYPE)
cmake_minimum_required(VERSION 3.10)
if (UNIX)
    add_definitions("-W -Wall -Wextra -fPIC -g")
endif (UNIX)
set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED ON)
set(CONAN_DISABLE_CHECK_COMPILER TRUE CACHE INTERNAL "")
if (EXISTS ${CMAKE_BINARY_DIR}/conanbuildinfo.cmake)
    include(${CMAKE_BINARY_DIR}/conanbuildinfo.cmake)
    conan_basic_setup(KEEP_RPATHS)
else()
    message(WARNING "The file conanbuildinfo.cmake doesn't exist, you have to run conan install first")
endif()
file(GLOB_RECURSE SOURCES_CLIENT ${PROJECT_SOURCE_DIR}/Client/*.hpp ${PROJECT_SOURCE_DIR}/Client/*.cpp)
file(GLOB_RECURSE SOURCES_SERVER ${PROJECT_SOURCE_DIR}/Server/*.hpp ${PROJECT_SOURCE_DIR}/Server/*.cpp)
file(GLOB_RECURSE SOURCES_SERVER ${PROJECT_SOURCE_DIR}/Shared/INetwork/*.hpp)
file(GLOB_RECURSE SOURCES_SERVER ${PROJECT_SOURCE_DIR}/Server/Network/NetworkManager/*)
file(GLOB_RECURSE SOURCES_SERVER ${PROJECT_SOURCE_DIR}/Server/Network/UDP/*)
file(GLOB_RECURSE SOURCES_SERVER ${PROJECT_SOURCE_DIR}/Server/Network/TCP/*)
file(GLOB_RECURSE SOURCES_SERVER ${PROJECT_SOURCE_DIR}/Server/Network/User/*)
file(GLOB_RECURSE SOURCES_SERVER ${PROJECT_SOURCE_DIR}/Server/Network/Packet/*)
file(GLOB_RECURSE SOURCES_SERVER ${PROJECT_SOURCE_DIR}/Server/*)

add_executable(rtype_client ${SOURCES_CLIENT})
add_executable(rtype_server ${SOURCES_SERVER})
target_include_directories(rtype_server PUBLIC ${PROJECT_SOURCE_DIR}/Shared/INetwork/)
target_include_directories(rtype_server PUBLIC ${PROJECT_SOURCE_DIR}/Server/Network/Packet/)
target_include_directories(rtype_server PUBLIC ${PROJECT_SOURCE_DIR}/Server/)
target_include_directories(rtype_server PUBLIC ${PROJECT_SOURCE_DIR}/Server/Network/TCP/)
target_include_directories(rtype_server PUBLIC ${PROJECT_SOURCE_DIR}/Server/Network/UDP/)
target_include_directories(rtype_server PUBLIC ${PROJECT_SOURCE_DIR}/Server/Network/User/)
target_include_directories(rtype_server PUBLIC ${PROJECT_SOURCE_DIR}/Server/Network/NetworkManager)
target_link_libraries(rtype_client ${CONAN_LIBS})
target_link_libraries(rtype_server ${CONAN_LIBS})